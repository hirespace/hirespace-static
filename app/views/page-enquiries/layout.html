{{> navLoggedIn }}

<div class="layout-offset-top">

    {{> enquiriesFeed }}

    <div class="enquiry-actions">
        <div class="container-narrow margin-top-double">
            {{> progressBar }}

            <header>
                <h1><strong data-bind="text: bookingDataObservable.word">Word</strong> at <span
                        data-bind="text: bookingDataObservable.venue.name">Venue</span></h1>
                <small class="label stage" data-bind="text: bookingDataObservable.stage.name">Stage</small>
            </header>
        </div>

        <section class="customer-contact-details" toggle-class="is-hidden: bookingData.stage.name == 'New'">
            <div class="container-narrow">
                <i class="icon telephone" size="36"></i>
                <strong data-bind="text: bookingDataObservable.customer.phone">Telephone Number</strong>
                <i class="icon envelope" size="36"></i>
                <strong data-bind="text: bookingDataObservable.customer.email">Email Address</strong>
            </div>
        </section>

        {{> detailsBar }}

        <main class="customer-details container-narrow padding-top-double"
              toggle-class="is-hidden: bookingData.status == 'won' || bookingData.status == 'lost'">
            <aside class="customer col-md-4">
                <img src="/assets/images/dummy/avatar-anonymous.png" alt="Anonymous Avatar"/>

                <div class="details">
                    <strong data-bind="text: bookingDataObservable.customer.name">Customer Name</strong>
                    <small data-bind="text: bookingDataObservable.customer.company">Customer Company</small>
                </div>
            </aside>

            <aside class="message col-md-8">
                <p data-bind="text: bookingDataObservable.message">Message</p>
            </aside>
        </main>

        <section class="hide confirm-status" toggle-class="is-visible: bookingData.status == 'won'">
            <div class="container-narrow">
                <h5 class="text-center margin-bottom-double">Please confirm your spend</h5>

                <div class="row confirm-spend">
                    <div class="col-md-4">
                        <input type="text" placeholder="Confirm spend ex. VAT"/>
                    </div>

                    <div class="col-md-8">
                        <ul class="tabs">
                            <li><span>Minimum spend</span></li>
                            <li><span>Rough total</span></li>
                            <li><span>Final spend</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section class="hide confirm-status" toggle-class="is-visible: bookingData.status == 'lost'">
            <div class="container-narrow">
                <h5 class="text-center margin-bottom-double">Tell Hire Space why this enquiry has been closed</h5>

                <ul class="tabs">
                    <li><span>No availability</span></li>
                    <li class="active"><span>Customer went elsewhere</span></li>
                    <li><span>Never heard back</span></li>
                    <li><span>Unsuitable enquiry</span></li>
                    <li><span>Other</span></li>
                </ul>
            </div>
        </section>

        <section class="hide" toggle-class="is-visible: bookingData.stage.name == 'New'">
            <nav class="controls container-narrow">
                <div class="row">
                    <div class="col-md-4">
                        <button class="green large">
                            <span class="toggle-modal" data-toggle-modal="modalCallCustomer"></span>
                            <i class="icon white telephone" size="36"></i>
                            Call James
                        </button>
                    </div>
                    <div class="col-md-4">
                        <button class="green large">
                            <span class="toggle-modal" data-toggle-modal="modalEmailCustomer"></span>
                            <i class="icon white envelope" size="36"></i>
                            Email James
                        </button>
                    </div>
                    <div class="col-md-4">
                        <button class="green large">
                            <span class="toggle-modal" data-toggle-modal="modalQuickReply"></span>
                            <i class="icon white comment" size="36"></i>
                            Quick Reply
                        </button>
                    </div>
                </div>
            </nav>
        </section>

        <section class="venue-manager-actions">
            <div class="container-narrow">
                {{> progressBar }}

                <!--<button data-toggle-view="show: bookingData.stage == 'New'" class="large grey">-->
                <!--+1 more-->
                <!--</button>-->

                <div class="hide" toggle-class="is-visible: bookingData.stage.name == 'In Progress'">
                    <button data-toggle='["updateHireSpaceButtons", "showUpdateHireSpaceButtons"]'
                            class="large grey" id="showUpdateHireSpaceButtons">
                        Show Update Hire Space buttons
                    </button>

                    <div class="row is-hidden" id="updateHireSpaceButtons">
                        <div class="col-md-4">
                            <button class="large green block next-step" data-step="Needs Archiving">Confirm</button>
                        </div>
                        <div class="col-md-4">
                            <button class="large black block next-step" data-step="Needs Archiving">Close</button>
                        </div>
                        <div class="col-md-4">
                            <button class="large grey block">Update Later</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

</div>

<script>
    // Initial Data
    var initBookingData = {
        "_id": "QJ8tFLRfe5Khgvurt",
        "budget": 22000,
        "customer": {
            "_id": "HxkGvowNbDHYdHGtE",
            "email": "Octavia.long@analogfolk.com",
            "phone": "07964998244",
            "name": "Octavia Long"
        },
        "date": {
            "finishdate": "2015-07-10T00:00:00.000Z",
            "flexible": false,
            "startdate": "2015-07-10T00:00:00.000Z"
        },
        "message": "summer party country house outside team building\nduring the day and then party in the evening and will probably need a few\nhotel rooms. date not fixed.",
        "people": 160,
        "stage": {
            "name": "New",
            "option": {
                "price": 121.11,
                "reasonLost": "Declined by customer"
            }
        },
        "status": "",
        "suggestedCriteria": {"date": {"flexible": false}},
        "time": {
            "finishtime": null,
            "flexible": null,
            "starttime": "09:30"
        },
        "timeToFollowUp": "2015-07-10T00:00:00.000Z",
        "venue": {
            "manager": "events ",
            "name": "Kensington Palace"
        },
        "word": "Summer Party",
        "internalNote": "test Note"
    };
</script>